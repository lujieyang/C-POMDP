<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of DiscretizeObsModel</title>
  <meta name="keywords" content="DiscretizeObsModel">
  <meta name="description" content="Discretizes the observation model on the observation side.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<table width="810" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF">
  <tr>
    <td>
      <img src="../../top.png" alt="Institut de Rob&ograve;tica i Inform&agrave;tica Industrial" width="775" height="60" border="0" USEMAP="#logos"/></td>
      <map name="logos">
       <area shape="rect" coords="740,0,775,60" href="http://www.csic.es" target="_blank">
       <area shape="circle" coords="706,29,20" href="http://www.upc.edu" target="_blank">
       <area shape="rect" coords ="0,0,740,60" href="http://www-iri.upc.es" target="_blank">
      </map>
    </td>
  </tr>
  <tr>
    <td>


<a name="_top"></a>
<!-- # ObsModel --><!-- # @CS_CO_ObsModel -->
<h1>DiscretizeObsModel
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>Discretizes the observation model on the observation side.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function CS_DO_OM=DiscretizeObsModel(CS_CO_OM,V,ba,nSamples) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment">   Discretizes the observation model on the observation side.

   Implementation of the lossless discretization of the observation model
   defined in section 6.2 of the paper. 
   The output is an observation model on a continuous state space but on a
   discrete a observation space. The dimensionality of this observation
   space is given by the number of elements in V (number of alpha elements
   in the previous iteration policy).
   This is only use in the experiment in Figure 11.

   See also MakeFigure11.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../.././@Policy/Values.html" class="code" title="function v=Values(P,b)">Values</a>	Belief value with all alpha-elements in the Policy.</li><li><a href="../.././@Policy/size.html" class="code" title="function s=size(P)">size</a>	Returns the size of a policy.</li><li><a href="../.././Belief/@DBelief/Update.html" class="code" title="function bOut=Update(b,po,Sp)">Update</a>	Belief evolution under an observation model.</li><li><a href="../.././Belief/@GBelief/Update.html" class="code" title="function bOut=Update(b,po,Sp)">Update</a>	Belief evolution under an observation model.</li><li><a href="../.././Belief/@GBelief/get.html" class="code" title="function v=get(gb,field)">get</a>	Get for GBeliefs.</li><li><a href="../.././Belief/@PBelief/Update.html" class="code" title="function bOut=Update(b,po,Sp)">Update</a>	Belief evolution under an observation model.</li><li><a href="../.././Lib/@GMixture/GMixture.html" class="code" title="function gm=GMixture(varargin)">GMixture</a>	Gaussian mixture constructor.</li><li><a href="../.././Lib/@GMixture/get.html" class="code" title="function value=get(gm,field,varargin)">get</a>	Get function for the GMixture object.</li><li><a href="../.././Lib/@Gaussian/get.html" class="code" title="function out=get(g,field)">get</a>	Gaussian object get function.</li><li><a href="../.././ObsModel/@CS_DO_ObsModel/CS_DO_ObsModel.html" class="code" title="function OM=CS_DO_ObsModel(varargin)">CS_DO_ObsModel</a>	CS_DO_ObsModel constructor.</li><li><a href="../.././ObsModel/@ObsModel/Update.html" class="code" title="function [bOut po]=Update(OM,b,o,Sp)">Update</a>	Belief evolution under an observation model.</li><li><a href="../.././POMDP/@CS_CO_CA_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for CS_CO_CA_POMDPs.</li><li><a href="../.././POMDP/@CS_CO_DA_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for CS_CO_DA_POMDPs.</li><li><a href="../.././POMDP/@CS_CO_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for CS_CO_POMDPs.</li><li><a href="../.././POMDP/@CS_DO_CA_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for CS_DO_CA_POMDPs.</li><li><a href="../.././POMDP/@CS_DO_DA_POMDP/Discretize.html" class="code" title="function DP=Discretize(CP,n)">Discretize</a>	Discretizes the state space of the CS_DO_DA_POMDP.</li><li><a href="../.././POMDP/@CS_DO_DA_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for CS_DO_DA_POMDPs.</li><li><a href="../.././POMDP/@CS_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for CS_POMDPs.</li><li><a href="../.././POMDP/@DS_CO_CA_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for DS_CO_CA_POMDPs.</li><li><a href="../.././POMDP/@DS_CO_DA_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for DS_CO_DA_POMDPs.</li><li><a href="../.././POMDP/@DS_DO_CA_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for DS_DO_CA_POMDPs.</li><li><a href="../.././POMDP/@DS_DO_DA_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for DS_DO_DA_POMDPs.</li><li><a href="../.././POMDP/@POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get functio for POMDPs.</li><li><a href="../.././Space/@CSpace/Discretize.html" class="code" title="function DS=Discretize(CS,n,varargin)">Discretize</a>	Converts a continuous space into a discrete one.</li><li><a href="../.././Space/@CSpace/UniformProbability.html" class="code" title="function p=UniformProbability(CS)">UniformProbability</a>	Uniform probability value on a continuous space.</li><li><a href="../.././Space/@CSpace/dim.html" class="code" title="function d=dim(CS)">dim</a>	Dimensionality of a continuous space.</li><li><a href="../.././Space/@CSpace/max.html" class="code" title="function m=max(S)">max</a>	Upper bound of a CSpace</li><li><a href="../.././Space/@CSpace/min.html" class="code" title="function m=min(S)">min</a>	Lower bound of a CSpace</li><li><a href="../.././Space/@DSpace/DSpace.html" class="code" title="function DS=DSpace(varargin)">DSpace</a>	DSpace constructor.</li><li><a href="../.././Space/@DSpace/UniformProbability.html" class="code" title="function p=UniformProbability(DS)">UniformProbability</a>	Uniform probability value on a discrete space.</li><li><a href="../.././Space/@DSpace/dim.html" class="code" title="function d=dim(DS)">dim</a>	Dimensionality of a discrete space.</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../.././POMDP/@CS_CO_CA_POMDP/DiscretizeObsModel.html" class="code" title="function DO_POMDP=DiscretizeObsModel(CO_POMDP)">DiscretizeObsModel</a>	Discretizes the observation model on the observation side.</li><li><a href="../.././POMDP/@CS_CO_DA_POMDP/DiscretizeObsModel.html" class="code" title="function DO_POMDP=DiscretizeObsModel(CO_POMDP,V,b,a)">DiscretizeObsModel</a>	Discretizes the observation model on the observation side.</li><li><a href="../.././POMDP/@CS_CO_POMDP/ComputeAlpha_a.html" class="code" title="function Element_a=ComputeAlpha_a(P,V,b,a,Alphas_j_a_o)">ComputeAlpha_a</a>	Compute the alpha_i_n-element for the given action and belief.</li><li><a href="../.././POMDP/@CS_DO_DA_POMDP/Discretize.html" class="code" title="function DP=Discretize(CP,n)">Discretize</a>	Discretizes the state space of the CS_DO_DA_POMDP.</li><li><a href="../.././POMDP/@DS_CO_CA_POMDP/DiscretizeObsModel.html" class="code" title="function DO_POMDP=DiscretizeObsModel(CO_POMDP)">DiscretizeObsModel</a>	Discretizes the observation model on the observation side.</li><li><a href="../.././POMDP/@DS_CO_DA_POMDP/DiscretizeObsModel.html" class="code" title="function DO_POMDP=DiscretizeObsModel(CO_POMDP)">DiscretizeObsModel</a>	Discretizes the observation model on the observation side.</li></ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function CS_DO_OM=DiscretizeObsModel(CS_CO_OM,V,ba,nSamples)</a>
0002 <span class="comment">%   Discretizes the observation model on the observation side.</span>
0003 <span class="comment">%</span>
0004 <span class="comment">%   Implementation of the lossless discretization of the observation model</span>
0005 <span class="comment">%   defined in section 6.2 of the paper.</span>
0006 <span class="comment">%   The output is an observation model on a continuous state space but on a</span>
0007 <span class="comment">%   discrete a observation space. The dimensionality of this observation</span>
0008 <span class="comment">%   space is given by the number of elements in V (number of alpha elements</span>
0009 <span class="comment">%   in the previous iteration policy).</span>
0010 <span class="comment">%   This is only use in the experiment in Figure 11.</span>
0011 <span class="comment">%</span>
0012 <span class="comment">%   See also MakeFigure11.</span>
0013 
0014   nj=<a href="../.././@Policy/size.html" class="code" title="function s=size(P)">size</a>(V); <span class="comment">% number of synthetic observations</span>
0015   oData=cell(1,nj); <span class="comment">%Weights for the GMixtures in 's' (one for each element in 'V')</span>
0016  
0017 
0018   <span class="comment">% Sample the observations</span>
0019   <span class="comment">% Caution:</span>
0020   <span class="comment">%     To actually get a good discrete observation model</span>
0021   <span class="comment">%     we must have p(s)=\sum_o p(s|o) p(o) = ct</span>
0022   <span class="comment">%     This is a strong assumption make in Section 5.1, page 14.</span>
0023   <span class="comment">%     If this is not this way the whole system breaks.</span>
0024   <span class="comment">%     Even with acarefully defined p(o,s) in  the CS_CO_ObsModel</span>
0025   <span class="comment">%     p(s) would only be constant if we discretize the obs model with</span>
0026   <span class="comment">%     a uniform sampling on the observation space.</span>
0027   <span class="comment">%     This can only be achieved by carefully selecting the samples</span>
0028   <span class="comment">%     (this is what we do for one-dimensional obs. spaces) or using</span>
0029   <span class="comment">%     a very large number of uniformly sampled observations (that is</span>
0030   <span class="comment">%     what it should be done in higher dimensional observations).</span>
0031   <span class="comment">%     The number of observations to sample is probably so large that</span>
0032   <span class="comment">%     could make this approach not very useful.</span>
0033   <span class="comment">%</span>
0034   <span class="keyword">if</span> <a href="../.././Space/@CSpace/dim.html" class="code" title="function d=dim(CS)">dim</a>(CS_CO_OM.O)==1
0035     oMin=<a href="../.././Space/@CSpace/min.html" class="code" title="function m=min(S)">min</a>(CS_CO_OM.O);
0036     oMax=<a href="../.././Space/@CSpace/max.html" class="code" title="function m=max(S)">max</a>(CS_CO_OM.O);
0037     oStep=(oMax-oMin)/(nSamples-1);
0038     os=oMin:oStep:oMax;
0039   <span class="keyword">else</span>
0040     DO=<a href="../.././POMDP/@CS_DO_DA_POMDP/Discretize.html" class="code" title="function DP=Discretize(CP,n)">Discretize</a>(CS_CO_OM.O,nSamples);
0041     os=zeros(<a href="../.././Space/@CSpace/dim.html" class="code" title="function d=dim(CS)">dim</a>(DO),nSamples);
0042     <span class="keyword">for</span> i=1:nSamples
0043       os(:,i)=DO{i};
0044     <span class="keyword">end</span>
0045   <span class="keyword">end</span>
0046     
0047   nm=zeros(1,nj);
0048   po=<a href="../.././Space/@CSpace/UniformProbability.html" class="code" title="function p=UniformProbability(CS)">UniformProbability</a>(CS_CO_OM.O);  
0049 
0050   <span class="keyword">for</span> i=1:nSamples
0051     o=os(:,i);
0052     
0053     [bao Os]=<a href="../.././Belief/@DBelief/Update.html" class="code" title="function bOut=Update(b,po,Sp)">Update</a>(CS_CO_OM,ba,o,CS_CO_OM.S);
0054     [v j]=<a href="../.././Space/@CSpace/max.html" class="code" title="function m=max(S)">max</a>(<a href="../.././@Policy/Values.html" class="code" title="function v=Values(P,b)">Values</a>(V,bao));
0055     
0056     <span class="keyword">if</span> nm(j)==0
0057       oData{j}=<a href="../.././Belief/@GBelief/get.html" class="code" title="function v=get(gb,field)">get</a>(Os,<span class="string">'w'</span>)/po;
0058     <span class="keyword">else</span>
0059       oData{j}=oData{j}+<a href="../.././Belief/@GBelief/get.html" class="code" title="function v=get(gb,field)">get</a>(Os,<span class="string">'w'</span>)/po;
0060     <span class="keyword">end</span>
0061     nm(j)=nm(j)+1;
0062   <span class="keyword">end</span>
0063   
0064   <span class="comment">% Obs models are defined giving p(o,s) and</span>
0065   <span class="comment">% oData is a kind of p(o|s).</span>
0066   <span class="comment">% We use the fact that p(o,s)=p(o|s)*p(s)</span>
0067   ps=<a href="../.././Space/@CSpace/UniformProbability.html" class="code" title="function p=UniformProbability(CS)">UniformProbability</a>(CS_CO_OM.S);  
0068   <span class="keyword">for</span> i=1:nj
0069     <span class="keyword">if</span> nm(i)==0
0070       oData{i}=<a href="../.././Lib/@GMixture/GMixture.html" class="code" title="function gm=GMixture(varargin)">GMixture</a>();
0071     <span class="keyword">else</span>
0072       oData{i}=<a href="../.././Lib/@GMixture/GMixture.html" class="code" title="function gm=GMixture(varargin)">GMixture</a>(oData{i}*(ps/nSamples),CS_CO_OM.gS);
0073     <span class="keyword">end</span>
0074   <span class="keyword">end</span>
0075 
0076   CS_DO_OM=<a href="../.././ObsModel/@CS_DO_ObsModel/CS_DO_ObsModel.html" class="code" title="function OM=CS_DO_ObsModel(varargin)">CS_DO_ObsModel</a>(CS_CO_OM.S,<a href="../.././Space/@DSpace/DSpace.html" class="code" title="function DS=DSpace(varargin)">DSpace</a>(nj),oData);
0077</pre></div>
<br>
<br>

  </table>
 <table width="810" height="35" border="0" align="center" cellpadding="0" background="../../espai.png">
  <tr>
    <td>
      <span class="footer" align="center"><center>
        <a href="http://www-iri.upc.es"  target="_blank">Institut de Rob&ograve;tica i Inform&agrave;tica Industrial</a>
      </center></span>
    </td>
  </tr>
</table>

<hr><address>Generated on Wed 05-Aug-2009 15:05:21 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2003</address>
</body>
</html>