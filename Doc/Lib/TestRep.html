<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of TestRep</title>
  <meta name="keywords" content="TestRep">
  <meta name="description" content="Executes many times of Perseus on a given problem.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<table width="810" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF">
  <tr>
    <td>
      <img src="../top.png" alt="Institut de Rob&ograve;tica i Inform&agrave;tica Industrial" width="775" height="60" border="0" USEMAP="#logos"/></td>
      <map name="logos">
       <area shape="rect" coords="740,0,775,60" href="http://www.csic.es" target="_blank">
       <area shape="circle" coords="706,29,20" href="http://www.upc.edu" target="_blank">
       <area shape="rect" coords ="0,0,740,60" href="http://www-iri.upc.es" target="_blank">
      </map>
    </td>
  </tr>
  <tr>
    <td>


<a name="_top"></a>
<!-- # Lib -->
<h1>TestRep
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>Executes many times of Perseus on a given problem.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function TestRep(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment">   Executes many times of Perseus on a given problem. 

   Executes a sequence of experiments on a given problem and stores the
   results in a file. 
   The aim of this is to obtain statistically significant data to generate
   the plots in the paper.

   Parameters can be
      - POMDP, P, range: The POMDP, the set of parameters, and the range
        for the repetitions.
      - name, range: The name is used to obtain the POMDP and the
        parameters P calling a function with name 'Get'+name+'Parameters'

   The execution of each repetition is extremely computationally
   demanding. The range is typically used to execute different repetitions
   in different computers, in parallel. 

   Finally note that, before executing anything, we check whether the file
   to generat is already available. If so nothing is executed.

   Examples of use:
     Get the experiment parameters     
        [POMDP P]=GetHallwayParameters;
        [POMDP P]=GetTest1Parameters;
     and execute   
        TestRep(POMDP,P,infix,1:10);

     or directly use
        TestRep('Hallway',infix,1:10);
        TestRep('Test1',infix,1:10);

   After each experiment statistics are obtained using GetPOMDPSolutionStatistics
   At the end of the execution, a file with the results and the statistics is 
   generated.
   This file is named as
         Results/POMDPname-infix-n.mat

   where - POMDPname is the output of get(POMDP,'name').
         - infix is the parameter given when calling this function.
         - n is the repetition number (in the given range).

   See also SampleBeliefs, iPerseus, <a href="GetPOMDPSolutionStatistics.html" class="code" title="function [tics aV aR nA nC]=GetPOMDPSolutionStatistics(POMDP,P,B,V,Alpha,time,maxTime,stTime)">GetPOMDPSolutionStatistics</a>.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href=".././Belief/@GBelief/get.html" class="code" title="function v=get(gb,field)">get</a>	Get for GBeliefs.</li><li><a href=".././Lib/@GMixture/get.html" class="code" title="function value=get(gm,field,varargin)">get</a>	Get function for the GMixture object.</li><li><a href=".././Lib/@Gaussian/get.html" class="code" title="function out=get(g,field)">get</a>	Gaussian object get function.</li><li><a href="GetPOMDPSolutionStatistics.html" class="code" title="function [tics aV aR nA nC]=GetPOMDPSolutionStatistics(POMDP,P,B,V,Alpha,time,maxTime,stTime)">GetPOMDPSolutionStatistics</a>	Collects statistics with the outcome of an experiment.</li><li><a href=".././POMDP/@CS_CO_CA_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for CS_CO_CA_POMDPs.</li><li><a href=".././POMDP/@CS_CO_DA_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for CS_CO_DA_POMDPs.</li><li><a href=".././POMDP/@CS_CO_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for CS_CO_POMDPs.</li><li><a href=".././POMDP/@CS_DO_CA_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for CS_DO_CA_POMDPs.</li><li><a href=".././POMDP/@CS_DO_DA_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for CS_DO_DA_POMDPs.</li><li><a href=".././POMDP/@CS_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for CS_POMDPs.</li><li><a href=".././POMDP/@DS_CO_CA_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for DS_CO_CA_POMDPs.</li><li><a href=".././POMDP/@DS_CO_DA_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for DS_CO_DA_POMDPs.</li><li><a href=".././POMDP/@DS_DO_CA_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for DS_DO_CA_POMDPs.</li><li><a href=".././POMDP/@DS_DO_DA_POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get function for DS_DO_DA_POMDPs.</li><li><a href=".././POMDP/@POMDP/POMDP.html" class="code" title="function P=POMDP(varargin)">POMDP</a>	POMDP constructor.</li><li><a href=".././POMDP/@POMDP/SampleBeliefs.html" class="code" title="function SB=SampleBeliefs(P,start,nBeliefs,minBeliefDist,stepsXtrial,minR,maxR)">SampleBeliefs</a>	Samples a set of beliefs from a POMDP.</li><li><a href=".././POMDP/@POMDP/get.html" class="code" title="function value=get(P,field)">get</a>	Get functio for POMDPs.</li><li><a href=".././POMDP/@POMDP/iPerseus.html" class="code" title="function [V Value Alpha t]=iPerseus(P,B,stopCriteria)">iPerseus</a>	Improved version of Perseus.</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href=".././Experiments/MakeFigure3.html" class="code" title="function MakeFigure3(varargin)">MakeFigure3</a>	Generates Figure 3.</li><li><a href=".././Experiments/MakeFigure4.html" class="code" title="function MakeFigure4">MakeFigure4</a>	Generates Figure 4.</li><li><a href="TestRepWithStatistics.html" class="code" title="function TestRepWithStatistics(varargin)">TestRepWithStatistics</a>	Executes many times Perseus on a given problem and collects statistics.</li></ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function TestRep(varargin)</a>
0002 <span class="comment">%   Executes many times of Perseus on a given problem.</span>
0003 <span class="comment">%</span>
0004 <span class="comment">%   Executes a sequence of experiments on a given problem and stores the</span>
0005 <span class="comment">%   results in a file.</span>
0006 <span class="comment">%   The aim of this is to obtain statistically significant data to generate</span>
0007 <span class="comment">%   the plots in the paper.</span>
0008 <span class="comment">%</span>
0009 <span class="comment">%   Parameters can be</span>
0010 <span class="comment">%      - POMDP, P, range: The POMDP, the set of parameters, and the range</span>
0011 <span class="comment">%        for the repetitions.</span>
0012 <span class="comment">%      - name, range: The name is used to obtain the POMDP and the</span>
0013 <span class="comment">%        parameters P calling a function with name 'Get'+name+'Parameters'</span>
0014 <span class="comment">%</span>
0015 <span class="comment">%   The execution of each repetition is extremely computationally</span>
0016 <span class="comment">%   demanding. The range is typically used to execute different repetitions</span>
0017 <span class="comment">%   in different computers, in parallel.</span>
0018 <span class="comment">%</span>
0019 <span class="comment">%   Finally note that, before executing anything, we check whether the file</span>
0020 <span class="comment">%   to generat is already available. If so nothing is executed.</span>
0021 <span class="comment">%</span>
0022 <span class="comment">%   Examples of use:</span>
0023 <span class="comment">%     Get the experiment parameters</span>
0024 <span class="comment">%        [POMDP P]=GetHallwayParameters;</span>
0025 <span class="comment">%        [POMDP P]=GetTest1Parameters;</span>
0026 <span class="comment">%     and execute</span>
0027 <span class="comment">%        TestRep(POMDP,P,infix,1:10);</span>
0028 <span class="comment">%</span>
0029 <span class="comment">%     or directly use</span>
0030 <span class="comment">%        TestRep('Hallway',infix,1:10);</span>
0031 <span class="comment">%        TestRep('Test1',infix,1:10);</span>
0032 <span class="comment">%</span>
0033 <span class="comment">%   After each experiment statistics are obtained using GetPOMDPSolutionStatistics</span>
0034 <span class="comment">%   At the end of the execution, a file with the results and the statistics is</span>
0035 <span class="comment">%   generated.</span>
0036 <span class="comment">%   This file is named as</span>
0037 <span class="comment">%         Results/POMDPname-infix-n.mat</span>
0038 <span class="comment">%</span>
0039 <span class="comment">%   where - POMDPname is the output of get(POMDP,'name').</span>
0040 <span class="comment">%         - infix is the parameter given when calling this function.</span>
0041 <span class="comment">%         - n is the repetition number (in the given range).</span>
0042 <span class="comment">%</span>
0043 <span class="comment">%   See also SampleBeliefs, iPerseus, GetPOMDPSolutionStatistics.</span>
0044 
0045   <span class="keyword">switch</span> nargin
0046     <span class="keyword">case</span> 3
0047       <span class="keyword">if</span> isa(varargin{1},<span class="string">'char'</span>)
0048         [<a href=".././POMDP/@POMDP/POMDP.html" class="code" title="function P=POMDP(varargin)">POMDP</a> P]=eval([<span class="string">'Get'</span> varargin{1} <span class="string">'Parameters'</span>]);
0049       <span class="keyword">else</span>
0050         error(<span class="string">'Wrong type of parameters in TestOne'</span>);
0051       <span class="keyword">end</span>
0052       infix=varargin{2};
0053       rep=varargin{3};
0054       
0055     <span class="keyword">case</span> 4
0056       <a href=".././POMDP/@POMDP/POMDP.html" class="code" title="function P=POMDP(varargin)">POMDP</a>=varargin{1};
0057       P=varargin{2};
0058       infix=varargin{3};
0059       rep=varargin{4};
0060       
0061     <span class="keyword">otherwise</span>
0062       error(<span class="string">'Wrong number of parameters in TestRep'</span>);
0063   <span class="keyword">end</span>
0064   
0065   <span class="comment">% Tag for the output files</span>
0066   prefix=sprintf(<span class="string">'Results/%s-%s'</span>,<a href=".././Belief/@GBelief/get.html" class="code" title="function v=get(gb,field)">get</a>(<a href=".././POMDP/@POMDP/POMDP.html" class="code" title="function P=POMDP(varargin)">POMDP</a>,<span class="string">'name'</span>),infix);
0067   
0068   <span class="keyword">for</span> i=rep
0069     name=sprintf(<span class="string">'%s-%u.mat'</span>,prefix,i);
0070     
0071     f=fopen(name);
0072     <span class="keyword">if</span> f&lt;0
0073       fprintf(<span class="string">'Repetition %u\n'</span>,i);
0074 
0075       <span class="comment">% Sample a set of beliefs</span>
0076       fprintf(<span class="string">'  Sampling Beliefs\n'</span>);
0077       B=<a href=".././POMDP/@POMDP/SampleBeliefs.html" class="code" title="function SB=SampleBeliefs(P,start,nBeliefs,minBeliefDist,stepsXtrial,minR,maxR)">SampleBeliefs</a>(<a href=".././POMDP/@POMDP/POMDP.html" class="code" title="function P=POMDP(varargin)">POMDP</a>,P.start,P.nBeliefs,P.dBelief,P.stepsXtrial,P.rMin,P.rMax);
0078 
0079       <span class="comment">% Solve the problem</span>
0080       fprintf(<span class="string">'  Solving\n'</span>);
0081       [V Val Alpha time]=<a href=".././POMDP/@POMDP/iPerseus.html" class="code" title="function [V Value Alpha t]=iPerseus(P,B,stopCriteria)">iPerseus</a>(<a href=".././POMDP/@POMDP/POMDP.html" class="code" title="function P=POMDP(varargin)">POMDP</a>,B,P.stopCriteria);
0082 
0083       <span class="comment">% Collect statistics on the resulting set of plans</span>
0084       [tics aV aR nA nC]=<a href="GetPOMDPSolutionStatistics.html" class="code" title="function [tics aV aR nA nC]=GetPOMDPSolutionStatistics(POMDP,P,B,V,Alpha,time,maxTime,stTime)">GetPOMDPSolutionStatistics</a>(<a href=".././POMDP/@POMDP/POMDP.html" class="code" title="function P=POMDP(varargin)">POMDP</a>,P,B,V,Alpha,time,P.maxTime,P.stTime);
0085     
0086       <span class="comment">% Save results for this repetition</span>
0087       save(name,<span class="string">'POMDP'</span>,<span class="string">'P'</span>,<span class="string">'B'</span>,<span class="string">'V'</span>,<span class="string">'Val'</span>,<span class="string">'Alpha'</span>,<span class="string">'time'</span>,<span class="string">'tics'</span>,<span class="string">'aV'</span>,<span class="string">'aR'</span>,<span class="string">'nA'</span>,<span class="string">'nC'</span>);
0088     <span class="keyword">else</span>
0089       fprintf(<span class="string">'Repetition %u is already generated\n'</span>,i);
0090       fclose(f);
0091     <span class="keyword">end</span>
0092     
0093   <span class="keyword">end</span></pre></div>
<br>
<br>

  </table>
 <table width="810" height="35" border="0" align="center" cellpadding="0" background="../espai.png">
  <tr>
    <td>
      <span class="footer" align="center"><center>
        <a href="http://www-iri.upc.es"  target="_blank">Institut de Rob&ograve;tica i Inform&agrave;tica Industrial</a>
      </center></span>
    </td>
  </tr>
</table>

<hr><address>Generated on Wed 05-Aug-2009 15:05:21 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2003</address>
</body>
</html>